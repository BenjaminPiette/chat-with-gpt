"use strict";(self.webpackChunkchat_with_gpt=self.webpackChunkchat_with_gpt||[]).push([[45],{33045:function(e,n,a){a.r(n),a.d(n,{default:function(){return H}});var t=a(29439),s=a(30168),i=a(50225),r=a(37540),l=a(58479),o=a(98296),d=a(68308),c=a(86279),m=a(72791),u=a(4349),g=a(24527),p=a(45155),f=a(4810),h=a(80184),x=new Set;function v(e){var n=(0,p.TL)(),a=(0,g.IU)(),s=a.key,i=a.state,r=a.voice,l=a.autoplayEnabled,d=a.play,c=(a.pause,a.cancel),v=a.setSourceElement,b=a.setComplete,j=(0,m.useState)(!1),y=(0,t.Z)(j,2),Z=y[0],w=y[1],M=(0,m.useCallback)((function(){w(!0),r?(i&&s===e.id?c():(v(e.id,document.querySelector(e.selector)),d()),b(e.complete)):n((0,f.St)({tab:"speech",option:"service"}))}),[i,s,e.id,e.selector,e.complete,r]);(0,m.useEffect)((function(){s===e.id&&b(e.complete)}),[s,e.id,e.complete]),(0,m.useEffect)((function(){l&&e.autoplay&&s!==e.id&&r&&!Z&&!x.has(e.id)&&"visible"===document.visibilityState&&(x.add(e.id),v(e.id,document.querySelector(e.selector)),d())}),[Z,s,r,l,e.id,e.selector,e.complete,e.autoplay]);var k=i&&s===e.id;return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(o.z,{variant:"subtle",size:"sm",compact:!0,onClickCapture:M,loading:k&&(null===i||void 0===i?void 0:i.buffering),children:[!k&&(0,h.jsx)("i",{className:"fa fa-headphones"}),!k&&(0,h.jsx)("span",{children:(0,h.jsx)(u.Z,{id:"S9BFby",defaultMessage:[{type:0,value:"Play"}]})}),k&&(null===i||void 0===i?void 0:i.buffering)&&(0,h.jsx)("span",{children:(0,h.jsx)(u.Z,{id:"6LJByb",defaultMessage:[{type:0,value:"Loading audio..."}]})}),k&&!(null!==i&&void 0!==i&&i.buffering)&&(0,h.jsx)("span",{children:(0,h.jsx)(u.Z,{id:"Fko0yT",defaultMessage:[{type:0,value:"Stop"}]})})]})})}var b,j,y,Z=a(1413),w=a(45987),M=a(846),k=a(64209),z=a(98180),C=a(40893),S=a(72738),N=a(36649),B=a(93539),T=["node","inline","className","children"],E=i.Z.div(b||(b=(0,s.Z)(["\n    padding: 0;\n    border-radius: 0.25rem;\n    overflow: hidden;\n\n    &>div {\n        margin: 0 !important;\n    }\n\n    .fa {\n        font-style: normal !important;\n    }\n"]))),L=i.Z.div(j||(j=(0,s.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    background: #191919;\n    height: 2.5rem;\n    padding: 0.1rem 0.1rem 0 0.5rem;\n\n    .mantine-Button-label {\n        display: flex;\n        align-items: center;\n\n        * {\n            font-size: 90%;\n        }\n    }\n"]))),P=i.Z.div(y||(y=(0,s.Z)(["\n    text-align: center;\n\n    img {\n        max-width: 30rem !important;\n        display: block;\n    }\n"])));function q(e){var n=(0,B.Z)(),a=(0,m.useMemo)((function(){var n=["prose","dark:prose-invert"];return e.className&&n.push(e.className),n}),[e.className]);return(0,m.useMemo)((function(){return(0,h.jsx)("div",{className:a.join(" "),children:(0,h.jsx)(M.D,{remarkPlugins:[C.Z,S.Z],rehypePlugins:[N.Z],components:{ol:function(e){var n=e.start,a=e.children;return(0,h.jsx)("ol",{start:null!==n&&void 0!==n?n:1,style:{counterReset:"list-item ".concat(n||1)},children:a})},code:function(e){e.node;var n=e.inline,a=e.className,t=e.children,s=(0,w.Z)(e,T),i=/language-(\w+)/.exec(a||""),r=String(t);return n?(0,h.jsx)("code",(0,Z.Z)((0,Z.Z)({className:a},s),{},{children:t})):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(E,{children:[(0,h.jsxs)(L,{children:[r.startsWith("<svg")&&r.includes("</svg>")&&(0,h.jsxs)(o.z,{variant:"subtle",size:"sm",compact:!0,onClick:function(){var e=new Blob([r],{type:"image/svg+xml"}),n=URL.createObjectURL(e),a=document.createElement("a");a.href=n,a.download="image.svg",a.click()},children:[(0,h.jsx)("i",{className:"fa fa-download"}),(0,h.jsx)("span",{children:(0,h.jsx)(u.Z,{id:"MI5gZ+",defaultMessage:[{type:0,value:"Download SVG"}]})})]}),(0,h.jsx)(l.q,{value:r,children:function(e){var n=e.copy,a=e.copied;return(0,h.jsxs)(o.z,{variant:"subtle",size:"sm",compact:!0,onClick:n,children:[(0,h.jsx)("i",{className:"fa fa-clipboard"}),(0,h.jsx)("span",{children:a?(0,h.jsx)(u.Z,{id:"ljHOzQ",defaultMessage:[{type:0,value:"Copied"}]}):(0,h.jsx)(u.Z,{id:"upBSoW",defaultMessage:[{type:0,value:"Copy"}]})})]})}})]}),(0,h.jsx)(k.Z,(0,Z.Z)({children:r,style:z.Z,language:(null===i||void 0===i?void 0:i[1])||"text",PreTag:"div"},s))]}),r.startsWith("<svg")&&r.includes("</svg>")&&(0,h.jsx)(P,{children:(0,h.jsx)("img",{src:"data:image/svg+xml;base64,".concat(btoa(r))})})]})}},children:e.content})})}),[e.content,a,n])}var F,G,I,O,R=a(15989),W=i.Z.span(F||(F=(0,s.Z)(["\n    position: fixed;\n    left: -9999px;\n    top: -9999px;\n"]))),Q=i.Z.div(G||(G=(0,s.Z)(['\n    &.by-user {\n        background: #22232b;\n    }\n\n    &.by-assistant {\n        background: #292933;\n    }\n\n    &.by-assistant + &.by-assistant, &.by-user + &.by-user {\n        border-top: 0.2rem dotted rgba(0, 0, 0, 0.1);\n    }\n\n    &.by-assistant {\n        border-bottom: 0.2rem solid rgba(0, 0, 0, 0.1);\n    }\n\n    position: relative;\n    padding: 1.618rem;\n\n    @media (max-width: 40em) {\n        padding: 1rem;\n    }\n\n    .inner {\n        margin: auto;\n    }\n\n    .content {\n        font-family: "Open Sans", sans-serif;\n        margin-top: 0rem;\n        max-width: 100%;\n\n        * {\n            color: white;\n        }\n\n        p, ol, ul, li, h1, h2, h3, h4, h5, h6, img, blockquote, &>pre {\n            max-width: 50rem;\n            margin-left: auto;\n            margin-right: auto;\n        }\n\n        img {\n            display: block;\n            max-width: 50rem;\n\n            @media (max-width: 50rem) {\n                max-width: 100%;\n            }\n        }\n\n        ol {\n            counter-reset: list-item;\n\n            li {\n                counter-increment: list-item;\n            }\n        }\n\n        em, i {\n            font-style: italic;\n        }\n\n        code {\n            &, * {\n                font-family: "Fira Code", monospace !important;\n            }\n            vertical-align: bottom;\n        }\n\n        /* Tables */\n        table {\n            margin-top: 1.618rem;\n            border-spacing: 0px;\n            border-collapse: collapse;\n            border: thin solid rgba(255, 255, 255, 0.1);\n            width: 100%;\n            max-width: 55rem;\n            margin-left: auto;\n            margin-right: auto;\n        }\n        td + td, th + th {\n            border-left: thin solid rgba(255, 255, 255, 0.1);\n        }\n        tr {\n            border-top: thin solid rgba(255, 255, 255, 0.1);\n        }\n        table td,\n        table th {\n            padding: 0.618rem 1rem;\n        }\n        th {\n            font-weight: 600;\n            background: rgba(255, 255, 255, 0.1);\n        }\n    }\n\n    .metadata {\n        display: flex;\n        flex-wrap: wrap;\n        align-items: center;\n        font-family: "Work Sans", sans-serif;\n        font-size: 0.8rem;\n        font-weight: 400;\n        opacity: 0.6;\n        max-width: 50rem;\n        margin-bottom: 0.0rem;\n        margin-right: -0.5rem;\n        margin-left: auto;\n        margin-right: auto;\n\n        span + span {\n            margin-left: 1em;\n        }\n\n        .fa {\n            font-size: 85%;\n        }\n\n        .fa + span {\n            margin-left: 0.2em;\n\n            @media (max-width: 40em) {\n                display: none;\n            }\n        }\n\n        .mantine-Button-root {\n            color: #ccc;\n            font-size: 0.8rem;\n            font-weight: 400;\n\n            .mantine-Button-label {\n                display: flex;\n                align-items: center;\n            }\n        }\n    }\n\n    .fa {\n        margin-right: 0.5em;\n        font-size: 85%;\n    }\n\n    .buttons {\n        text-align: right;\n    }\n\n    strong {\n        font-weight: bold;\n    }\n']))),U=i.Z.div(I||(I=(0,s.Z)(["\n    position: absolute;\n    bottom: calc(-1.618rem - 0.5rem);\n    left: 50%;\n    width: 0.5rem;\n    height: 0.5rem;\n    margin-left: -0.25rem;\n    border-radius: 50%;\n    background: rgba(255, 255, 255, 0.1);\n"]))),_=i.Z.div(O||(O=(0,s.Z)(["\n    max-width: 50rem;\n    margin-left: auto;\n    margin-right: auto;\n    margin-top: 0.5rem;\n\n    .mantine-Button-root {\n        margin-top: 1rem;\n    }\n"])));function D(){return(0,h.jsx)(r.a,{variant:"dots",size:"xs",style:{marginLeft:"1rem",position:"relative",top:"-0.2rem"}})}function H(e){var n=(0,R.bp)(),a=(0,m.useState)(!1),s=(0,t.Z)(a,2),i=s[0],r=s[1],g=(0,m.useState)(""),x=(0,t.Z)(g,2),b=x[0],j=x[1],y=(0,B.Z)(),Z=(0,p.CG)(f.O5),w=(0,m.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case"user":return n?y.formatMessage({id:"role-user-formal",defaultMessage:[{type:0,value:"User"}]}):y.formatMessage({id:"role-user",defaultMessage:[{type:0,value:"You"}]});case"assistant":return y.formatMessage({id:"role-chatgpt",defaultMessage:[{type:0,value:"ChatGPT"}]});case"system":return y.formatMessage({id:"role-system",defaultMessage:[{type:0,value:"System"}]});default:return e}}),[y]);return(0,m.useMemo)((function(){return"system"===e.message.role?null:(0,h.jsxs)(Q,{className:"message by-"+e.message.role,children:[(0,h.jsxs)("div",{className:"inner",children:[(0,h.jsxs)("div",{className:"metadata",children:[(0,h.jsxs)("span",{children:[(0,h.jsxs)("strong",{children:[w(e.message.role,e.share),"gpt-4"===e.message.model&&" (GPT 4)",(0,h.jsx)(W,{children:":"})]}),"assistant"===e.message.role&&e.last&&!e.message.done&&(0,h.jsx)(D,{})]}),(0,h.jsx)(v,{id:e.message.id,selector:".content-"+e.message.id,complete:!!e.message.done,autoplay:e.last&&n.chat.lastReplyID===e.message.id}),(0,h.jsx)("div",{style:{flexGrow:1}}),(0,h.jsx)(l.q,{value:e.message.content,children:function(e){var n=e.copy,a=e.copied;return(0,h.jsxs)(o.z,{variant:"subtle",size:"sm",compact:!0,onClick:n,style:{marginLeft:"1rem"},children:[(0,h.jsx)("i",{className:"fa fa-clipboard"}),a?(0,h.jsx)(u.Z,{id:"ljHOzQ",defaultMessage:[{type:0,value:"Copied"}]}):(0,h.jsx)("span",{children:(0,h.jsx)(u.Z,{id:"upBSoW",defaultMessage:[{type:0,value:"Copy"}]})})]})}}),"undefined"!==typeof navigator.share&&(0,h.jsxs)(o.z,{variant:"subtle",size:"sm",compact:!0,onClick:function(){return(0,c.BN)(e.message.content)},children:[(0,h.jsx)("i",{className:"fa fa-share"}),(0,h.jsx)("span",{children:(0,h.jsx)(u.Z,{id:"gzJlXS",defaultMessage:[{type:0,value:"Share"}]})})]}),!n.isShare&&"user"===e.message.role&&(0,h.jsxs)(o.z,{variant:"subtle",size:"sm",compact:!0,onClick:function(){j(e.message.content),r((function(e){return!e}))},children:[(0,h.jsx)("i",{className:"fa fa-edit"}),(0,h.jsx)("span",{children:i?(0,h.jsx)(u.Z,{id:"raQMIg",defaultMessage:[{type:0,value:"Cancel"}]}):(0,h.jsx)(u.Z,{id:"Tgo3vj",defaultMessage:[{type:0,value:"Edit"}]})})]}),!n.isShare&&"assistant"===e.message.role&&(0,h.jsxs)(o.z,{variant:"subtle",size:"sm",compact:!0,onClick:function(){return n.regenerateMessage(e.message)},children:[(0,h.jsx)("i",{className:"fa fa-refresh"}),(0,h.jsx)("span",{children:(0,h.jsx)(u.Z,{id:"zBmup+",defaultMessage:[{type:0,value:"Regenerate"}]})})]})]}),!i&&(0,h.jsx)(q,{content:e.message.content,className:"content content-"+e.message.id}),i&&(0,h.jsxs)(_,{children:[(0,h.jsx)(d.g,{value:b,onChange:function(e){return j(e.currentTarget.value)},autosize:!0}),(0,h.jsx)(o.z,{variant:"light",onClick:function(){return n.editMessage(e.message,b)},children:(0,h.jsx)(u.Z,{id:"Bm3EKs",defaultMessage:[{type:0,value:"Save changes"}]})}),(0,h.jsx)(o.z,{variant:"subtle",onClick:function(){return r(!1)},children:(0,h.jsx)(u.Z,{id:"raQMIg",defaultMessage:[{type:0,value:"Cancel"}]})})]})]}),e.last&&(0,h.jsx)(U,{})]})}),[e.last,e.share,i,b,n,e.message,e.message.content,Z])}}}]);
//# sourceMappingURL=45.b27347cf.chunk.js.map